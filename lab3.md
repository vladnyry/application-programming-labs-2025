# Лабораторная работа № 3
# Работа с многомерными массивами

- [Теория](#теория)
  - [Изображения](#изображения)
  - [Аудиофайлы](#аудиофайлы)
  - [NumPy](#numpy)
  - [OpenCV](#opencv)
  - [SoundFile](#soundfile)
  - [Matplotlib](#matplotlib)
  - [Полезные ссылки](#полезные-ссылки)
- [Задание](#задание)
  - [Общее задание](#общее-задание)
  - [Варианты](#варианты)

# Теория

## Изображения
Изображения представляют собой многомерные массивы (матрицы) пикселей. Каждый пиксель содержит значение яркости, которое влияет на цвет изображения.

Основные компоненты:
- Размер - длина и ширина изображения, измеряется в количестве пикселей.
- Каналы - третье измерение после длины и ширины. Количество каналов влияет на цвет изображения. Цветные изображения обычно имеют 3 канала - красный, зелёный и синий (r, g, b), полутоновые и бинарные - один канал (значение яркости). Изображения с прозрачностью имеют 4 канала (r, g, b, a), где четвёртый канал отвечает за прозрачность.
- Пиксель - наименьшая неделимая единица изображения. Пиксель имеет яркость от 0 до 255 (uint) или от 0 до 1 (float). Пиксель может содержать от 1 до 4 значений в зависимости от количества каналов изображения. Например, пиксель зелёного цветя будет иметь значение (0, 255, 0).

## Аудиофайлы
Аудиофайлы представляют собой одномерные (моно) или двумерные (стерео) массивы, состоящие из сэмплов.

Основные компоненты:
- Размер - длина массива, количество сэмплов.
- Сэмпл - мгновенное значение амплитуды звуковой волны.
- Амплитуда - значение каждого сэмпла. Имеет значение от -1.0 до 1.0.
- Частота дискретизации - количество сэмпловв секунду, измеряется в герцах (Гц, Hz). Влияет на качество аудио. Стандартное качество CD - 44100 Hz.
- Длительность - размер, делённый на частоту дискретизации (получаем длину аудио в секундах).

## NumPy
NumPy - это библиотека для работы с многомерными массивами и матричными операциями. Обеспечивает высокую производительность за счет реализации на C/C++.

Установка: 
```
pip install numpy
```

Ключевые возможности:

- N-мерные массивы (ndarray)
- Математические функции (линейная алгебра, преобразование Фурье)
- Инструменты для интеграции с C/C++


## OpenCV

OpenCV — это открытая библиотека для компьютерного зрения и обработки изображений. Она была разработана для решения задач, связанных с обработкой и анализом изображений и видео.

Установка:
```
pip install opencv-python
```

Пример использования:
```py
import cv2  # импорт
# Также возможен следующий вариант импорта:
# from cv2 import cv2

img = cv2.imread('image.jpg')  # загрузка изображения

cv2.imshow('girl', img)  # отображение
cv2.waitKey(0)

cv2.imwrite('image2.jpg', img)  # сохранение изображения
```

Поскольку изображение представляет собой многомерный массив, то к нему могут быть применены операции из библиотеки `numpy`, например:

```py
img[0, 0, :] = 255  # замена значения пикселя
shape = img.shape  # получение размера
img2 = img.astype(np.uint8)  # преобразование типов
```

## SoundFile

SoundFile — библиотека для чтения и записи аудиофайлов. Данные загружаются в формате массивов numpy.

Установка: 
```py
pip install soundfile
```

Пример использования:
```py
import soundfile as sf

# Загрузка аудио
data, samplerate = sf.read('audio.mp3')

print(f"Массив сэмплов: {data}")
print(f"Частота дискретизации: {samplerate}")

# Сохранение аудио  
sf.write('new_audio.mp3', data, samplerate)
```


## Matplotlib

Matplotlib — это библиотека для визуализации данных в Python, которая позволяет создавать статические, анимационные и интерактивные графики.

Установка:
```
pip install matplotlib
```

Пример отображения изображения:
```py
import matplotlib.pyplot as plt  # импорт
plt.imshow(img)  # загрузка изображения
plt.show()  # отображение
```

Пример построения графика синуса:
```py
import matplotlib.pyplot as plt
import numpy as np

# создание данных
x = np.linspace(0, 10, 100)  # 100 точек от 0 до 10
y = np.sin(x)  # нахождение синуса

# создание графика
plt.figure(figsize=(10, 5))  # размер графика

plt.plot(x, y, label='sin(x)', color='blue')  # линейный график синуса
plt.title('График синуса')  # заголовок графика
plt.xlabel('x')  # подпись оси x
plt.ylabel('sin(x)')  # подпись оси y
plt.axhline(0, color='black',linewidth=0.5, ls='--')  # линия по оси x
plt.axvline(0, color='black',linewidth=0.5, ls='--')  # линия по оси y
plt.grid(color = 'gray', linestyle = '--', linewidth = 0.5)  # сетка
plt.legend()  # легенда

# отображение графика
plt.show()
```

## Полезные ссылки

- [numpy (doc)](https://numpy.org/doc/stable/index.html)
- [OpenCV (doc)](https://docs.opencv.org/4.x/d6/d00/tutorial_py_root.html)
- [scikit-image](https://scikit-image.org/docs/stable/)
- [SoundFile (doc)](https://python-soundfile.readthedocs.io/en/latest/)
- [matplotlib](https://matplotlib.org/stable/index.html)


# Задание
## Общее задание

1. Используя данные из второй лабораторной работы, считать изображение или аудио из файла.
1. Вывести размер изображения или аудио.
1. Выполнить преобразование из вашего варианта над картинкой или аудиофайлом. 
1. Использовать matplotlib для демонстрации исходного изображения или аудио и результата.
1. Сохранить результат в новый файл.

Путь к исходному файлу, путь для сохранения, параметры по варианту (если есть) необходимо передавать через аргументы командной строки.

## Варианты

1. Обрежьте изображения до заданных размеров, начиная от левого верхнего угла.
1. Измените размер изображения на заданный.
1. Соедините (состыкуйте) два изображения.
1. Поверните изображение на заданный угол.
1. Инвертируйте цвета в изображении.
1. Сделайте изображение полутоновым.
1. Сделайте изображение бинарным.
1. Поменяйте местами каналы изображения.
1. Отразите изображение.
1. Наложите одно изображение на другое, сделав накладываемое полупрозрачным.
1. Сделайте из изображения паззл (разделите на n равных частей и заново сложите случайным образом в изображение такого же размера).
1. Наложите на изображение белый шум.
1. Наложите на изображение рамку (нарисовать самостоятельно или использовать изображение).
1. Сделайте изображение круглым (область вне круга должна быть чёрной, белой или прозрачной).
1. Добавьте эффект градиента (изображение с одной из сторон постепенно становится светлее).
1. Преобразуйте изображение в пиксель-арт (размер изображения сохранить).


1. Уменьшите амплитуду сэмплов аудиофайла на заданную величину.
1. Увеличьте амплитуду сэмплов аудиофайла на заданную величину.
1. Обрежьте длину аудио в заданном диапазоне.
1. Склейте два аудиофайла.
1. Переверните аудио задом наперед.
1. Сделайте фильтр тишины (удалите участки тише заданного порога).
1. Смешайте два аудиофайла.
1. Сделайте эхо-эффект (с помощью наложения с задержкой).
1. Увеличьте скорость аудиофайла в заданное количество раз.
1. Уменьшите скорость аудиофайла в заданное количество раз.
1. Добавьте в аудио белый шум.
1. Уменьшите амплитуду выше заданной до порогового значения.
1. Сделайте сглаживание (усреднение значений) аудио с помощью numpy.convolve.
1. Усильте высокие частоты (чтобы выделить высокие частоты, необходимо из обычной версии аудио вычесть сглаженную).